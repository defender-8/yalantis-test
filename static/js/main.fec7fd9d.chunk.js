(this["webpackJsonpyalantis-test"]=this["webpackJsonpyalantis-test"]||[]).push([[0],{30:function(e,t,n){},56:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(9),s=n.n(r),i=(n(30),n(10)),o=n(2),l=n(6),u=n(4),m=n(5),j=n.n(m),d=n(14),b=n(24),h=n.n(b),p={employees:null,loading:!0,errorMessage:!1},O="GET_EMPLOYEES",f="UPDATE_EMPLOYEE",y="GET_ERROR";var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case O:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,employees:c});case f:var a=e.employees.findIndex((function(e){return e.id===c.id}));return e.employees[a].isActive=!c.isActive,Object(o.a)({},e);case y:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,errorMessage:c});default:return e}},x=(n(56),n(1)),g=Object(c.createContext)();var N=function(){var e=Object(u.c)((function(e){return e})),t=e.employees,n=e.loading,a=e.errorMessage,r=Object(c.useState)(JSON.parse(window.localStorage.getItem("activeEmployees"))||{}),s=Object(l.a)(r,2),i=s[0],m=s[1],b=Object.keys(i).length,p=Object(u.b)();return Object(c.useEffect)((function(){p(function(e){return function(){var t=Object(d.a)(j.a.mark((function t(n){var c,a,r,s,i,l;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.get("https://yalantis-react-school-api.yalantis.com/api/task0/users");case 3:c=t.sent,a=c.data.map((function(t){return e.length?Object(o.a)(Object(o.a)({},t),{},{isActive:e.includes(t.id)}):Object(o.a)(Object(o.a)({},t),{},{isActive:!1})})),n({type:O,payload:a}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("err:\n",t.t0),t.t0.response.data?(s=t.t0.response,i=s.status,l=s.data,r="".concat(i,": ").concat(l)):r=t.t0.message,n({type:y,payload:r});case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(Object.keys(i)))}),[]),Object(c.useEffect)((function(){window.localStorage.setItem("activeEmployees",JSON.stringify(i))}),[b]),Object(x.jsx)("div",{className:"layout clearfix",children:a?Object(x.jsx)("div",{className:"error-message",children:a}):n?"Loading...":Object(x.jsxs)(g.Provider,{value:m,children:[Object(x.jsx)("div",{className:"layout-left",children:Object(x.jsx)(E,{employees:t})}),Object(x.jsx)("div",{className:"layout-right",children:Object(x.jsx)(A,{activeEmployees:i})})]})})};function E(e){var t=function(e){var t=Array.from(Array(26)).map((function(e,t){return t+65})).map((function(e){return String.fromCodePoint(e)})),n={};return t.forEach((function(e){return n[e]=[]})),e.sort(C("firstName")).forEach((function(e){return n[e.firstName[0]].push(e)})),Object.entries(n).map((function(e){var t=Object(l.a)(e,2);return{letter:t[0],users:t[1]}}))}(e.employees);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{children:"Employees"}),Object(x.jsx)("div",{className:"employees",children:t.map((function(e){return Object(x.jsx)(w,{item:e},e.letter)}))})]})}function w(e){var t=e.item,n=t.letter,c=t.users;return Object(x.jsxs)("div",{className:"employees-letter-block",children:[Object(x.jsx)("div",{className:"employees-letter-block-title",children:n}),Object(x.jsx)(k,{employees:c})]})}function k(e){var t=e.employees;return t.length?Object(x.jsx)("ul",{className:"employees-list",children:t.map((function(e){return Object(x.jsx)(S,{employee:e},e.id)}))}):Object(x.jsx)("div",{className:"employees-list-empty",children:"No Employees"})}function S(e){var t=e.employee,n=t.id,a=t.firstName,r=t.lastName,s=t.dob,l=t.isActive,m=Object(c.useContext)(g),b=Object(u.b)(),h=function(e){b(function(e){return function(){var t=Object(d.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:f,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t)),m(l?function(e){return delete e[n],e}:function(e){return Object(o.a)(Object(o.a)({},e),{},Object(i.a)({},n,{firstName:a,lastName:r,dob:s}))})};return Object(x.jsxs)("li",{className:"employees-list-item".concat(l?" active":""),children:[Object(x.jsx)("div",{className:"employees-list-item-name",children:"".concat(a," ").concat(r)}),Object(x.jsxs)("form",{children:[Object(x.jsxs)("div",{className:"radio-item",children:[Object(x.jsx)("input",{type:"radio",id:"".concat(n,"notActive"),name:"status",value:!1,checked:!l,onChange:h}),Object(x.jsx)("label",{htmlFor:"".concat(n,"notActive"),children:"not active"})]}),Object(x.jsxs)("div",{className:"radio-item",children:[Object(x.jsx)("input",{type:"radio",id:"".concat(n,"active"),name:"status",value:!0,checked:l,onChange:h}),Object(x.jsx)("label",{htmlFor:"".concat(n,"active"),children:"active"})]})]})]})}function A(e){var t=e.activeEmployees,n=function(e){var t=function(){for(var e=["January","February","March","April","May","June","July","August","September","October","November","December"],t=(new Date).getMonth(),n=[],c=t;c<e.length;c++)n.push(e[c]);for(var a=0;a<t;a++)n.push(e[a]);return{months:e,monthsFromCurrent:n}}(),n=t.months,c=t.monthsFromCurrent,a={};return c.map((function(e){return a[e]=[]})),Object.entries(e).map((function(e){var t=Object(l["a"])(e,2),n=t[0],c=t[1];return Object(o["a"])({id:n},c)})).sort(C("lastName")).forEach((function(e){var t=new Date(Date.parse(e.dob)),c=t.getFullYear(),r=n[t.getMonth()],s=t.getDate(),i="".concat(s," ").concat(r,", ").concat(c," year");a[r].push(Object(o.a)(Object(o.a)({},e),{},{dob:i}))})),Object.entries(a).map((function(e){var t=Object(l.a)(e,2);return{month:t[0],users:t[1]}}))}(t);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{children:"Employees birthday"}),Object(x.jsx)("div",{className:"birthdays",children:Object.keys(t).length?n.map((function(e){return Object(x.jsx)(F,{month:e.month,employees:e.users},e.month)})):Object(x.jsx)("div",{className:"birthdays-empty",children:"Employees List is empty"})})]})}function F(e){var t=e.month,n=e.employees;return Object(x.jsxs)("div",{className:"month-birthdays",children:[Object(x.jsx)("div",{className:"month-birthdays-title",children:t}),n.length?Object(x.jsx)("ul",{className:"month-birthdays-list",children:n.map((function(e){return Object(x.jsx)("li",{children:"".concat(e.lastName," ").concat(e.firstName," - ").concat(e.dob)},e.id)}))}):Object(x.jsx)("div",{className:"month-birthdays-empty",children:"No Employees"})]})}function C(e){return function(t,n){return t[e]>n[e]?1:-1}}var M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,61)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},_=n(11),D=(n(58),[n(25).a]);var P=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_.b,J=Object(_.c)(v,P(_.a.apply(void 0,D)));s.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(u.a,{store:J,children:Object(x.jsx)(N,{})})}),document.getElementById("root")),M()}},[[60,1,2]]]);
//# sourceMappingURL=main.fec7fd9d.chunk.js.map